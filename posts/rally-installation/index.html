<!doctype html>
<html lang="zh-tw">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name="hugo-theme" content=" 0.7.1">



  <link rel="icon" type="image/png" sizes="32x32" href="/">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/">
  <link rel="canonical" href="https://maple52046.github.io/posts/rally-installation/">
<link rel="preload" as="style" href="/bundle.css?v=1598602884" media="all">
<link rel="stylesheet" href="/bundle.css?v=1598602884" media="all">
<style>.cdata pre{color:#edf2f7;background-color:#2d3748}.cdata :not(pre)>code{color:#805ad5;background-color:#f7fafc}.chroma .err{color:#fed7d7;background-color:#9b2c2c}.chroma .hl{background-color:#4a5568}.chroma .ln{color:#a0aec0}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr{color:#63b3ed}.chroma .kt{color:#b794f4}.chroma .na{color:#f6e05e}.chroma .nb{color:#f6ad55}.chroma .nc{color:#fc8181}.chroma .no{color:#68d391}.chroma .nd{color:#fc8181}.chroma .ne{color:#fc8181}.chroma .nf{color:#f6ad55}.chroma .nt{color:#fc8181}.chroma .l{color:#b794f4}.chroma .dl,.chroma .ld,.chroma .s,.chroma .s2,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .sd{color:#68d391}.chroma .se{color:#a0aec0}.chroma .s1,.chroma .sh,.chroma .si,.chroma .sr,.chroma .ss,.chroma .sx{color:#68d391}.chroma .il,.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .mo{color:#b794f4}.chroma .o,.chroma .ow{color:#90cdf4}.chroma .p{color:#cbd5e0}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cp,.chroma .cpf,.chroma .cs{color:#a0aec0}.chroma .ge{font-style:italic}.chroma .gs{font-weight:700}</style>



<title>Install Rally 筆記 (OpenStack benchmark) : 世界的盡頭</title>

<meta property="og:title" content="Install Rally 筆記 (OpenStack benchmark)">
<meta property="og:site_name" content="世界的盡頭">
<meta property="og:url" content="https://maple52046.github.io/posts/rally-installation/">
<link rel="image_src" href="https://maple52046.github.io/">
<meta property="og:image" content="https://maple52046.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="og:type" content="article">
<meta property="og:locale" content="zh_tw">
<meta property="og:description" content="Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。 實驗環境    Item Value     Operating System Ubuntu 12.04 x64   Python version Python 2.7   OpenStack version Grizzly (2013)    Install Rally 一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。">
<meta name="description" content="Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。 實驗環境    Item Value     Operating System Ubuntu 12.04 x64   Python version Python 2.7   OpenStack version Grizzly (2013)    Install Rally 一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。">
<meta property="og:updated_time" content="2015-02-24T16:45:00Z">
<meta property="fb:app_id" content="">
<meta name="author" content="Chen-Hao Ku">
<meta property="article:author" content="https://maple52046.github.io">
<meta property="article:published_time" content="2015-02-24T16:45:00Z">
<meta property="article:modified_time" content="2015-02-24T16:45:00Z">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Install Rally 筆記 (OpenStack benchmark)",
  "alternativeHeadline": "Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。 實驗環境    Item Value     Operating System Ubuntu 12.04 x64   Python version Python 2.7   OpenStack version Grizzly (2013)    Install Rally 一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。",
  "url": "https://maple52046.github.io/posts/rally-installation/",
  "image": "https://maple52046.github.io/",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://maple52046.github.io/posts/rally-installation/"
  },
  "description": "Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。 實驗環境    Item Value     Operating System Ubuntu 12.04 x64   Python version Python 2.7   OpenStack version Grizzly (2013)    Install Rally 一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。",
  "author": {
    "@type": "Person",
    "name": "Chen-Hao Ku"
  },
  "publisher": {
    "@type": "Organization",
    "name": "世界的盡頭",
    "logo": {
      "@type": "ImageObject",
      "url": "https://maple52046.github.io/"
    }
  },
  "datePublished": "2015-02-24T16:45:00Z",
  "dateModified": "2015-02-24T16:45:00Z",
  "articleBody": "\u003cp\u003e\u003ca href=\"http://rally.readthedocs.org/en/latest/index.html\"\u003eRally\u003c/a\u003e 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 \u003ca href=\"https://wiki.openstack.org/wiki/Rally#How_To\"\u003eOpenStack 官方 Wiki\u003c/a\u003e 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。\u003c/p\u003e\n\u003ch2 id=\"實驗環境\"\u003e實驗環境\u003c/h2\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eItem\u003c/th\u003e\n\u003cth\u003eValue\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eOperating System\u003c/td\u003e\n\u003ctd\u003eUbuntu 12.04 x64\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePython version\u003c/td\u003e\n\u003ctd\u003ePython 2.7\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eOpenStack version\u003c/td\u003e\n\u003ctd\u003eGrizzly (2013)\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"install-rally\"\u003eInstall Rally\u003c/h2\u003e\n\u003cp\u003e一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。\u003c/p\u003e\n\u003cp\u003e直接在 OpenStack 上開了一個新的 VM，一樣是選擇 Ubuntu 12.04，就可以直接安裝。\u003cem\u003e(不過現在回想起來，應該要用 virtualenv 來裝就可以解決，也不會影響原本的系統。)\u003c/em\u003e\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePS: Rally 可以跟 DevStack 一起部署。參考: \u003ca href=\"https://wiki.openstack.org/wiki/Rally/installation#Rally_with_DevStack_all_in_one_installation\"\u003eRally with DevStack all in one installation\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eStep\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e下載 source code\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# git clone https://git.openstack.org/stackforge/rally\n\u003c/code\u003e\u003c/pre\u003e\u003col start=\"2\"\u003e\n\u003cli\u003e執行 script\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# ./rally/install_rally.sh\n\u003c/code\u003e\u003c/pre\u003e\u003col start=\"3\"\u003e\n\u003cli\u003e安裝並執行 tox (當前版本可以跳過此步驟)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# pip install 'tox==1.6.1'\nroot@rally:~# tox\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"deployment-initialization\"\u003eDeployment initialization\u003c/h2\u003e\n\u003cp\u003e安裝完 Rally 之後，再進行下一步之前，必須要確定該 host 可以使用 OpenStack API\u003c/p\u003e\n\u003cp\u003e建立 OpenStack credentials (openrc)，然後看看 keystone client 是否可已使用:\u003c/p\u003e\n\u003cp\u003e建立 RC file:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eOS_TENANT_NAME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eadmin\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eOS_USERNAE\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eadmin\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eOS_PASSWORD\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003emyStackAdmin\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eOS_AUTH_URL\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;http://myopenstack:5000/v2.0/\u0026#34;\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eOS_SERVICE_ENDPOINT\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;http://myopenstack:35357/v2.0\u0026#34;\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eOS_SERVICE_TOKEN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003emyOpenStackAdminToken28143\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e測試 keystone 指令是否能使用:  \u003cem\u003e(keystone client 已經在 install_rally.sh 的時候就安裝了，不需要額外裝)\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@localhost:~# source openrc\nroot@localhost:~# keystone tenant-list\n... (省略) ...\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e接下來要設定 deployment\u003c/p\u003e\n\u003ch3 id=\"step-1\"\u003eStep 1\u003c/h3\u003e\n\u003cp\u003e首先，複製 samples 裡面的 existing.json，並修改參數\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# cp rally/samples/deployments/existing.json ./\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;ExistingCloud\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;auth_url\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;http://myopenstack:5000/v2.0/\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;region_name\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;RegionOne\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;endpoint_type\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;public\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;admin\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026#34;username\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;admin\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026#34;password\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;myStackAdmin\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026#34;tenant_name\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;benchmark\u0026#34;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003etype 的部分不能換改\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eauth_url\u003c/strong\u003e 這個參數只要使用 public url 的就可以了\u003c/li\u003e\n\u003cli\u003eUser 一定要是具有 admin role 的 user；tenant 則不一定要特地建立專門使用的，因為測試的過程不會使用到自己的 tenant。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e接著執行命令 \u003ccode\u003erally deployment create --filename=\u0026lt;json file\u0026gt; --name=\u0026lt;name of Openstack deployment\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment create --filename existing.json --name myStack\n+--------------------------------------+----------------------------+---------+------------------+--------+\n| uuid                                 | created_at                 | name    | status           | active |\n+--------------------------------------+----------------------------+---------+------------------+--------+\n| 3070593f-c583-4bcf-85a8-7dc7345ad146 | 2015-02-24 03:45:37.088393 | myStack | deploy-\u0026gt;finished |        |\n+--------------------------------------+----------------------------+---------+------------------+--------+\nUsing deployment: 3070593f-c583-4bcf-85a8-7dc7345ad146\n~/.rally/openrc was updated\n\nHINTS:\n* To get your cloud resources, run:\n\trally show [flavors|images|keypairs|networks|secgroups]\n\n* To use standard OpenStack clients, set up your env by running:\n\tsource ~/.rally/openrc\n  OpenStack clients are now configured, e.g run:\n\tglance image-list\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e這時候執行 rally show [option] 可以看到 Openstack 資訊\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally show images\n+--------------------------------------+------------------------------+------------+\n| UUID                                 | Name                         | Size (B)   |\n+--------------------------------------+------------------------------+------------+\n| 53c59f00-509a-4056-b5b2-ff1984c9323f | Ubuntu 14.04 (Cloud Image)   | 256836096  |\n| 75426fa5-f73b-46a4-84fa-4a44f9cbc9fb | Ubuntu 12.04 (Cloud Image)   | 261423616  |\n| 7bd19a5c-0eba-439c-a627-599df9d9ad4d | CentOS 7                     | 418688512  |\n+--------------------------------------+------------------------------+------------+\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"step-2\"\u003eStep 2\u003c/h3\u003e\n\u003cp\u003e接下來，執行 \u003ccode\u003erally deployment check\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment check\nkeystone endpoints are valid and following services are available:\n+----------+----------+-----------+\n| services | type     | status    |\n+----------+----------+-----------+\n| cinder   | volume   | Available |\n| ec2      | ec2      | Available |\n| glance   | image    | Available |\n| keystone | identity | Available |\n| nova     | compute  | Available |\n| quantum  | network  | Available |\n+----------+----------+-----------+\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"benchmarking-openstack\"\u003eBenchmarking OpenStack\u003c/h2\u003e\n\u003cp\u003e接下來跑一個 benchmark 的範例\u003c/p\u003e\n\u003ch3 id=\"step-1-1\"\u003eStep 1\u003c/h3\u003e\n\u003cp\u003e從 sample 中複製 benchmark task 範例\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ecp samples/tasks/scenarios/nova/boot-and-delete.json ./task-1.json\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e修改 task 內容\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;NovaServers.boot_and_delete_server\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;flavor\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"nt\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;m1.tiny\u0026#34;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;image\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"nt\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;CirrOS 0.3.3\u0026#34;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;force_delete\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026#34;runner\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;constant\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;times\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;concurrency\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026#34;context\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026#34;users\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"nt\"\u003e\u0026#34;tenants\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"nt\"\u003e\u0026#34;users_per_tenant\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eFlavor name、image name 可以用 rally show [option] 去抓取。\n另外，根據 OpenStack Wiki 的\u003ca href=\"https://wiki.openstack.org/wiki/Rally/Concepts\"\u003e資料\u003c/a\u003e， flavor 與 image 可以改用提供 id、uuid 的方式。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan class=\"s2\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e\u003cspan class=\"err\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026#34;flavor_id\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026#34;image_id\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;73257560-c59b-4275-a1ec-ab140e5b9979\u0026#34;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"step-2-1\"\u003eStep 2\u003c/h2\u003e\n\u003cp\u003e接下來，執行 \u003ccode\u003erally -v task start \u0026lt;task json file\u0026gt; --tag \u0026lt;task name\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e最後會出現:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally -v task start task-1.json --tag \u0026quot;Task 1\u0026quot;\n\n... (過程省略) ...\n\n--------------------------------------------------------------------------------\nTask 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309: finished\n--------------------------------------------------------------------------------\n\ntest scenario NovaServers.boot_and_delete_server\nargs position 0\nargs values:\n{u'args': {u'flavor': {u'name': u'm1.tiny'},\n           u'force_delete': False,\n           u'image': {u'name': u'CirrOS 0.3.3'}},\n u'context': {u'users': {u'project_domain': u'default',\n                         u'resource_management_workers': 30,\n                         u'tenants': 3,\n                         u'user_domain': u'default',\n                         u'users_per_tenant': 2}},\n u'runner': {u'concurrency': 2, u'times': 10, u'type': u'constant'}}\n+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+\n| action             | min (sec) | avg (sec) | max (sec) | 90 percentile | 95 percentile | success | count |\n+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+\n| nova.boot_server   | 6.708     | 13.289    | 37.405    | 34.299        | 35.852        | 100.0%  | 10    |\n| nova.delete_server | 2.347     | 3.872     | 5.509     | 4.932         | 5.22          | 100.0%  | 10    |\n| total              | 9.408     | 17.16     | 39.752    | 38.566        | 39.159        | 100.0%  | 10    |\n+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+\nLoad duration: 85.8980619907\nFull duration: 97.1042778492\n\nHINTS:\n* To plot HTML graphics with this data, run:\n\trally task report 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309 --out output.html\n\n* To get raw JSON output of task results, run:\n\trally task results 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309\n\nUsing task: 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e跑完之後就會出現如上方範例的簡易報告，如果想要詳盡的報告內容，可以按照提示執行 \u003ccode\u003erally task report \u0026lt;uuid\u0026gt; --out \u0026lt;html file\u0026gt;\u003c/code\u003e 就可以產生 html 檔案。\u003c/p\u003e\n\u003cp\u003eBenchmark 參數說明請參考: https://wiki.openstack.org/wiki/Rally/Concepts\u003c/p\u003e\n\u003cp\u003e另外，Rally 官方也提供了安裝在 docker 的方法，以及如果 Rally 是安裝在 OpenStack controller 時，也有幾個比較簡易的步驟可以參考: http://rally.readthedocs.org/en/latest/tutorial.html\u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"troubleshooting\"\u003eTroubleshooting\u003c/h1\u003e\n\u003ch2 id=\"schema-validation-error\"\u003eSchema validation error\u003c/h2\u003e\n\u003cp\u003e執行命令 \u003ccode\u003erally deployment create --filename=\u0026lt;json file\u0026gt; --name=\u0026lt;name of Openstack deployment\u0026gt;\u003c/code\u003e 時發生以下錯誤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment create --filename=mystack.json --name=myStack\n2015-02-24 03:11:33.579 23212 ERROR rally.api [-] Deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783: Schema validation error.\nConfig schema validation error: {'admin': {'username': 'admin', 'password': 'myStackAdmin', 'tenant': 'benchmark'}, 'auth_url': 'http://myopenstack:5000/v2.0/', 'type': 'ExistingCloud'} is not valid under any of the given schemas\n\nFailed validating 'anyOf' in schema:\n    {'anyOf': [{'properties': {'admin': {'$ref': '#/definitions/user'}},\n                'required': ['type', 'auth_url', 'admin']},\n               {'required': ['type', 'auth_url', 'users'],\n                'users': {'items': {'$ref': '#/definitions/user'},\n                          'type': 'array'}}],\n     'definitions': {'user': {'oneOf': [{'properties': {'tenant_name': {'type': 'string'}},\n                                         'required': ['username',\n                                                      'password',\n                                                      'tenant_name']},\n                                        {'properties': {'project_domain_name': {'type': 'string'},\n                                                        'project_name': {'type': 'string'},\n                                                        'user_domain_name': {'type': 'string'}},\n                                         'required': ['username',\n                                                      'password',\n                                                      'project_name']}],\n                              'properties': {'password': {'type': 'string'},\n                                             'username': {'type': 'string'}},\n                              'type': 'object'}},\n     'properties': {'auth_url': {'type': 'string'},\n                    'endpoint_type': {'enum': ['admin',\n                                               'internal',\n                                               'public'],\n                                      'type': 'string'},\n                    'region_name': {'type': 'string'},\n                    'type': {'type': 'string'}},\n     'type': 'object'}\n\nOn instance:\n    {'admin': {'password': 'myStackAdmin',\n               'tenant': 'benchmark',\n               'username': 'admin'},\n     'auth_url': 'http://myopenstack:5000/v2.0/',\n     'type': 'ExistingCloud'}.\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e這時候執行 \u003ccode\u003erally deployment list\u003c/code\u003e 可以看到 deployment 的狀態是 failed\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment list\n+--------------------------------------+----------------------------+---------+----------------+--------+\n| uuid                                 | created_at                 | name    | status         | active |\n+--------------------------------------+----------------------------+---------+----------------+--------+\n| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-\u0026gt;failed |        |\n+--------------------------------------+----------------------------+---------+----------------+--------+\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e雖然這時候，執行 \u003ccode\u003erally deployment recreate --deployment \u0026lt;uuid of deployment\u0026gt;\u003c/code\u003e 就會\u003cstrong\u003e看似\u003c/strong\u003e恢復正常。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment recreate --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783\nroot@rally:~# rally deployment list\n+--------------------------------------+----------------------------+---------+------------------+--------+\n| uuid                                 | created_at                 | name    | status           | active |\n+--------------------------------------+----------------------------+---------+------------------+--------+\n| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-\u0026gt;finished |        |\n+--------------------------------------+----------------------------+---------+------------------+--------+\nroot@rally:~# rally use deployment --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783\nUsing deployment: 59dc5f2c-a83a-42d8-bf49-777ff5e32783\n~/.rally/openrc was updated\n\nHINTS:\n* To get your cloud resources, run:\n\trally show [flavors|images|keypairs|networks|secgroups]\n\n* To use standard OpenStack clients, set up your env by running:\n\tsource ~/.rally/openrc\n  OpenStack clients are now configured, e.g run:\n\tglance image-list\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e但是要做其他動作就會發生錯誤，例如:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment check\nAuthentication Issues: user rally doesn't have 'admin' role.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003e這是因為\u003ca href=\"https://wiki.openstack.org/wiki/Rally/HowTo#Step_1._Deployment_initialization_.28use_existing_cloud.29\"\u003eOpenStack Wiki 教學文\u003c/a\u003e裡，deployment.json 少了一些參數。如果是直接從 source code 裡面的 sample 中複製並修改，就不會發生這個問題。\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"connectionrefused-unable-to-establish-connection-openstack-api-endpoint\"\u003eConnectionRefused: Unable to establish connection OpenStack API endpoint\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003eroot@rally:~# rally deployment check\nkeystone endpoints are valid and following services are available:\nCommand failed, please check log for more info\n2015-02-24 03:48:00.930 24945 CRITICAL rally [-] ConnectionRefused: Unable to establish connection to http://quanta-42.sslab.cs.nthu.edu.tw:35357/v2.0/OS-KSADM/services\n2015-02-24 03:48:00.930 24945 TRACE rally Traceback (most recent call last):\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/bin/rally\u0026quot;, line 10, in \u0026lt;module\u0026gt;\n2015-02-24 03:48:00.930 24945 TRACE rally     sys.exit(main())\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/main.py\u0026quot;, line 42, in main\n2015-02-24 03:48:00.930 24945 TRACE rally     return cliutils.run(sys.argv, categories)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/cliutils.py\u0026quot;, line 318, in run\n2015-02-24 03:48:00.930 24945 TRACE rally     ret = fn(*fn_args, **fn_kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;\u0026lt;string\u0026gt;\u0026quot;, line 2, in check\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/envutils.py\u0026quot;, line 66, in default_from_global\n2015-02-24 03:48:00.930 24945 TRACE rally     return f(*args, **kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/commands/deployment.py\u0026quot;, line 248, in check\n2015-02-24 03:48:00.930 24945 TRACE rally     for service in client.services.list():\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/v2_0/services.py\u0026quot;, line 32, in list\n2015-02-24 03:48:00.930 24945 TRACE rally     return self._list(\u0026quot;/OS-KSADM/services\u0026quot;, \u0026quot;OS-KSADM:services\u0026quot;)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/base.py\u0026quot;, line 113, in _list\n2015-02-24 03:48:00.930 24945 TRACE rally     resp, body = self.client.get(url, **kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/adapter.py\u0026quot;, line 164, in get\n2015-02-24 03:48:00.930 24945 TRACE rally     return self.request(url, 'GET', **kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/adapter.py\u0026quot;, line 200, in request\n2015-02-24 03:48:00.930 24945 TRACE rally     resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/adapter.py\u0026quot;, line 89, in request\n2015-02-24 03:48:00.930 24945 TRACE rally     return self.session.request(url, method, **kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/utils.py\u0026quot;, line 318, in inner\n2015-02-24 03:48:00.930 24945 TRACE rally     return func(*args, **kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/session.py\u0026quot;, line 369, in request\n2015-02-24 03:48:00.930 24945 TRACE rally     resp = send(**kwargs)\n2015-02-24 03:48:00.930 24945 TRACE rally   File \u0026quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/session.py\u0026quot;, line 412, in _send_request\n2015-02-24 03:48:00.930 24945 TRACE rally     raise exceptions.ConnectionRefused(msg)\n2015-02-24 03:48:00.930 24945 TRACE rally ConnectionRefused: Unable to establish connection to http://quanta-42:35357/v2.0/OS-KSADM/services\n2015-02-24 03:48:00.930 24945 TRACE rally\nroot@rally:~#\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e我會發生這個問題是因為，我將 Rally 安裝在 OpenStack 之外，而 \u003ccode\u003erally deployment check\u003c/code\u003e 會 call internal url (或是 admin url 我不是很確定)而非 public url。不過解決方法很簡單，\u003cstrong\u003e只要將 IP 與 hostname 對應設定到 /etc/hosts 上即可。\u003c/strong\u003e\u003c/p\u003e"
}
</script>

<link rel="preload" as="script" href="/bundle.js?v=1598602884">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://stats.g.doubleclick.net">
<link rel="preconnect" href="https://www.googleadservices.com">
<link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=UA-79529428-1">
<script src="https://www.googletagmanager.com/gtag/js?id=UA-79529428-1"></script>
<script>
  window.dataLayer=window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js',new Date());
  gtag('config','UA-79529428-1');
  gtag('config','883-715-9394');
</script>

</head>
<body>

  <header id="nav" class="header">
  <div class="ax-l-i max-w-6xl">
    <div class="ax-logo">
      <a class="block" href="/" title="世界的盡頭"><span class="font-semibold text-raven-900">世界的盡頭</span></a>
    </div>
    <div class="ax-user">
      <a class="p-2 w-8 h-8 block text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" target="_blank" rel="noopener nofollow" href="https://www.google.com/search?q=site:https://maple52046.github.io" title="">
        <svg class="fill-current" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.67 12.804c0-5.6 4.544-10.134 10.133-10.134s10.134 4.544 10.134 10.134-4.544 10.133-10.134 10.133S2.67 18.393 2.67 12.804zm28.943 16.923l-8.868-8.868c4.287-5.3 3.68-13.012-1.378-17.57S8.564-1.066 3.75 3.75s-5.017 12.558-.46 17.618 12.28 5.665 17.57 1.378l8.868 8.868a1.33 1.33 0 0 0 2.231-.597c.123-.46-.008-.952-.345-1.29h0z"/></svg>

      </a>
      <a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href="/posts/">
        Posts
      </a>
      <a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href="/categories/">
        Categories
      </a>
      <a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href="/tags/">
        Tags
      </a>
    </div>
  </div>

  
</header>

  <main>
<div class="default-single">
  <div class="ax-title ax-l-o">
    <div class="ax-l-i max-w-680">
      <h1 class="post-title font-content-title font-normal leading-tight tracking-default text-40">Install Rally 筆記 (OpenStack benchmark)</h1>

      <div class="ax-meta flex items-center mt-5">
        <div class="flex-grow min-w-0">
          <div class="flex items-center">
  <div class="flex-shrink-0">
    <img
    class="w-12 h-12 sm:w-14 sm:h-14 object-cover p-3px rounded-full border border-blue-300"
    src="https://i.imgur.com/ejTlxI5.jpg"
    alt="Chen-Hao Ku">
  </div>
  <div class="flex-shrink-0 ml-2 leading-tight font-content-sans">
    <a class="block text-sm text-raven-800 hover:text-raven-900 hover:underline focus:underline" target="_blank" rel="noopener nofollow" title="Chen-Hao Ku" href="https://maple52046.github.io">Chen-Hao Ku</a>
    <time class="text-sm text-raven-500" datetime="2015-02-24T16:45:00Z">Feb 25, 2015 12:45AM</time>
  </div>
</div>

        </div>
        <div>
          <div class="flex items-center">
  <a class="flex-shrink-0 block text-raven-800 hover:text-raven-900" target="_blank" rel="noopener nofollow" title="" href="https://twitter.com/intent/tweet?text=Install%20Rally%20%e7%ad%86%e8%a8%98%20%28OpenStack%20benchmark%29%20by%20%40%25%21s%28%3cnil%3e%29%20https%3a%2f%2fmaple52046.github.io%2fposts%2frally-installation%2f"><svg class="w-6 h-6 fill-current" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M32 6.078c-1.2.522-2.458.868-3.78 1.036 1.36-.812 2.398-2.088 2.886-3.626a13.11 13.11 0 0 1-4.16 1.588C25.742 3.794 24.026 3 22.154 3a6.56 6.56 0 0 0-6.556 6.562c0 .52.044 1.02.152 1.496-5.454-.266-10.28-2.88-13.522-6.862-.566.982-.898 2.106-.898 3.316a6.57 6.57 0 0 0 2.914 5.452 6.48 6.48 0 0 1-2.964-.808v.072c0 3.188 2.274 5.836 5.256 6.446-.534.146-1.116.216-1.72.216-.42 0-.844-.024-1.242-.112.85 2.598 3.262 4.508 6.13 4.57a13.18 13.18 0 0 1-8.134 2.798c-.538 0-1.054-.024-1.57-.1C2.906 27.93 6.35 29 10.064 29c12.072 0 18.672-10 18.672-18.668 0-.3-.01-.57-.024-.848C30.014 8.56 31.108 7.406 32 6.078z"/></svg>
</a>
  <a class="ml-3 flex-shrink-0 block text-raven-800 hover:text-raven-900" target="_blank" rel="noopener nofollow" title="" href="https://www.facebook.com/dialog/share?app_id=&display=page&href=https%3a%2f%2fmaple52046.github.io%2fposts%2frally-installation%2f"><svg class="w-6 h-6 fill-current" viewBox="-7 -3.5 39 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M30.234 0H1.765C.8.001 0 .79 0 1.766v28.47C.001 31.2.79 32 1.766 32h15.328V19.625h-4.156V14.78h4.156v-3.564c0-4.134 2.523-6.384 6.21-6.384 1.766 0 3.284.13 3.726.2v4.32h-2.543c-2.006 0-2.394.953-2.394 2.352v3.085h4.797l-.625 4.844h-4.172V32h8.14C31.21 32 32 31.2 32 30.234V1.765C32 .8 31.21 0 30.234 0z"/></svg>
</a>
</div>

        </div>
      </div>
    </div>
  </div><div class="ax-content ax-l-o">
    <div class="ax-l-i max-w-680">
      <article class="cdata"><p><a href="http://rally.readthedocs.org/en/latest/index.html">Rally</a> 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 <a href="https://wiki.openstack.org/wiki/Rally#How_To">OpenStack 官方 Wiki</a> 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。</p>
<h2 id="實驗環境">實驗環境</h2>
<table>
<thead>
<tr>
<th>Item</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Operating System</td>
<td>Ubuntu 12.04 x64</td>
</tr>
<tr>
<td>Python version</td>
<td>Python 2.7</td>
</tr>
<tr>
<td>OpenStack version</td>
<td>Grizzly (2013)</td>
</tr>
</tbody>
</table>
<h2 id="install-rally">Install Rally</h2>
<p>一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。</p>
<p>直接在 OpenStack 上開了一個新的 VM，一樣是選擇 Ubuntu 12.04，就可以直接安裝。<em>(不過現在回想起來，應該要用 virtualenv 來裝就可以解決，也不會影響原本的系統。)</em></p>
<!-- more -->
<blockquote>
<p>PS: Rally 可以跟 DevStack 一起部署。參考: <a href="https://wiki.openstack.org/wiki/Rally/installation#Rally_with_DevStack_all_in_one_installation">Rally with DevStack all in one installation</a></p>
</blockquote>
<p><strong>Step</strong>:</p>
<ol>
<li>下載 source code</li>
</ol>
<pre><code>root@rally:~# git clone https://git.openstack.org/stackforge/rally
</code></pre><ol start="2">
<li>執行 script</li>
</ol>
<pre><code>root@rally:~# ./rally/install_rally.sh
</code></pre><ol start="3">
<li>安裝並執行 tox (當前版本可以跳過此步驟)</li>
</ol>
<pre><code>root@rally:~# pip install 'tox==1.6.1'
root@rally:~# tox
</code></pre><h2 id="deployment-initialization">Deployment initialization</h2>
<p>安裝完 Rally 之後，再進行下一步之前，必須要確定該 host 可以使用 OpenStack API</p>
<p>建立 OpenStack credentials (openrc)，然後看看 keystone client 是否可已使用:</p>
<p>建立 RC file:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">export</span> <span class="nv">OS_TENANT_NAME</span><span class="o">=</span>admin
<span class="nb">export</span> <span class="nv">OS_USERNAE</span><span class="o">=</span>admin
<span class="nb">export</span> <span class="nv">OS_PASSWORD</span><span class="o">=</span>myStackAdmin
<span class="nb">export</span> <span class="nv">OS_AUTH_URL</span><span class="o">=</span><span class="s2">&#34;http://myopenstack:5000/v2.0/&#34;</span>
<span class="nb">export</span> <span class="nv">OS_SERVICE_ENDPOINT</span><span class="o">=</span><span class="s2">&#34;http://myopenstack:35357/v2.0&#34;</span>
<span class="nb">export</span> <span class="nv">OS_SERVICE_TOKEN</span><span class="o">=</span>myOpenStackAdminToken28143
</code></pre></div><p>測試 keystone 指令是否能使用:  <em>(keystone client 已經在 install_rally.sh 的時候就安裝了，不需要額外裝)</em></p>
<pre><code>root@localhost:~# source openrc
root@localhost:~# keystone tenant-list
... (省略) ...
</code></pre><p>接下來要設定 deployment</p>
<h3 id="step-1">Step 1</h3>
<p>首先，複製 samples 裡面的 existing.json，並修改參數</p>
<pre><code>root@rally:~# cp rally/samples/deployments/existing.json ./
</code></pre><div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;ExistingCloud&#34;</span><span class="p">,</span>
    <span class="nt">&#34;auth_url&#34;</span><span class="p">:</span> <span class="s2">&#34;http://myopenstack:5000/v2.0/&#34;</span><span class="p">,</span>
    <span class="nt">&#34;region_name&#34;</span><span class="p">:</span> <span class="s2">&#34;RegionOne&#34;</span><span class="p">,</span>
    <span class="nt">&#34;endpoint_type&#34;</span><span class="p">:</span> <span class="s2">&#34;public&#34;</span><span class="p">,</span>
    <span class="nt">&#34;admin&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;admin&#34;</span><span class="p">,</span>
        <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;myStackAdmin&#34;</span><span class="p">,</span>
        <span class="nt">&#34;tenant_name&#34;</span><span class="p">:</span> <span class="s2">&#34;benchmark&#34;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><ul>
<li>type 的部分不能換改</li>
<li><strong>auth_url</strong> 這個參數只要使用 public url 的就可以了</li>
<li>User 一定要是具有 admin role 的 user；tenant 則不一定要特地建立專門使用的，因為測試的過程不會使用到自己的 tenant。</li>
</ul>
<p>接著執行命令 <code>rally deployment create --filename=&lt;json file&gt; --name=&lt;name of Openstack deployment&gt;</code></p>
<pre><code>root@rally:~# rally deployment create --filename existing.json --name myStack
+--------------------------------------+----------------------------+---------+------------------+--------+
| uuid                                 | created_at                 | name    | status           | active |
+--------------------------------------+----------------------------+---------+------------------+--------+
| 3070593f-c583-4bcf-85a8-7dc7345ad146 | 2015-02-24 03:45:37.088393 | myStack | deploy-&gt;finished |        |
+--------------------------------------+----------------------------+---------+------------------+--------+
Using deployment: 3070593f-c583-4bcf-85a8-7dc7345ad146
~/.rally/openrc was updated

HINTS:
* To get your cloud resources, run:
	rally show [flavors|images|keypairs|networks|secgroups]

* To use standard OpenStack clients, set up your env by running:
	source ~/.rally/openrc
  OpenStack clients are now configured, e.g run:
	glance image-list
root@rally:~#
</code></pre><p>這時候執行 rally show [option] 可以看到 Openstack 資訊</p>
<pre><code>root@rally:~# rally show images
+--------------------------------------+------------------------------+------------+
| UUID                                 | Name                         | Size (B)   |
+--------------------------------------+------------------------------+------------+
| 53c59f00-509a-4056-b5b2-ff1984c9323f | Ubuntu 14.04 (Cloud Image)   | 256836096  |
| 75426fa5-f73b-46a4-84fa-4a44f9cbc9fb | Ubuntu 12.04 (Cloud Image)   | 261423616  |
| 7bd19a5c-0eba-439c-a627-599df9d9ad4d | CentOS 7                     | 418688512  |
+--------------------------------------+------------------------------+------------+
root@rally:~#
</code></pre><h3 id="step-2">Step 2</h3>
<p>接下來，執行 <code>rally deployment check</code></p>
<pre><code>root@rally:~# rally deployment check
keystone endpoints are valid and following services are available:
+----------+----------+-----------+
| services | type     | status    |
+----------+----------+-----------+
| cinder   | volume   | Available |
| ec2      | ec2      | Available |
| glance   | image    | Available |
| keystone | identity | Available |
| nova     | compute  | Available |
| quantum  | network  | Available |
+----------+----------+-----------+
root@rally:~#
</code></pre><h2 id="benchmarking-openstack">Benchmarking OpenStack</h2>
<p>接下來跑一個 benchmark 的範例</p>
<h3 id="step-1-1">Step 1</h3>
<p>從 sample 中複製 benchmark task 範例</p>
<pre><code>cp samples/tasks/scenarios/nova/boot-and-delete.json ./task-1.json
</code></pre><p>修改 task 內容</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;NovaServers.boot_and_delete_server&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&#34;flavor&#34;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;m1.tiny&#34;</span>
                <span class="p">},</span>
                <span class="nt">&#34;image&#34;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;CirrOS 0.3.3&#34;</span>
                <span class="p">},</span>
                <span class="nt">&#34;force_delete&#34;</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">},</span>
            <span class="nt">&#34;runner&#34;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;constant&#34;</span><span class="p">,</span>
                <span class="nt">&#34;times&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                <span class="nt">&#34;concurrency&#34;</span><span class="p">:</span> <span class="mi">2</span>
            <span class="p">},</span>
            <span class="nt">&#34;context&#34;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&#34;users&#34;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&#34;tenants&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                    <span class="nt">&#34;users_per_tenant&#34;</span><span class="p">:</span> <span class="mi">2</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><p>Flavor name、image name 可以用 rally show [option] 去抓取。
另外，根據 OpenStack Wiki 的<a href="https://wiki.openstack.org/wiki/Rally/Concepts">資料</a>， flavor 與 image 可以改用提供 id、uuid 的方式。</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;args&#34;</span><span class="err">:</span> <span class="p">{</span>
   <span class="nt">&#34;flavor_id&#34;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nt">&#34;image_id&#34;</span><span class="p">:</span> <span class="s2">&#34;73257560-c59b-4275-a1ec-ab140e5b9979&#34;</span>
<span class="p">}</span><span class="err">,</span>
</code></pre></div><h2 id="step-2-1">Step 2</h2>
<p>接下來，執行 <code>rally -v task start &lt;task json file&gt; --tag &lt;task name&gt;</code></p>
<p>最後會出現:</p>
<pre><code>root@rally:~# rally -v task start task-1.json --tag &quot;Task 1&quot;

... (過程省略) ...

--------------------------------------------------------------------------------
Task 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309: finished
--------------------------------------------------------------------------------

test scenario NovaServers.boot_and_delete_server
args position 0
args values:
{u'args': {u'flavor': {u'name': u'm1.tiny'},
           u'force_delete': False,
           u'image': {u'name': u'CirrOS 0.3.3'}},
 u'context': {u'users': {u'project_domain': u'default',
                         u'resource_management_workers': 30,
                         u'tenants': 3,
                         u'user_domain': u'default',
                         u'users_per_tenant': 2}},
 u'runner': {u'concurrency': 2, u'times': 10, u'type': u'constant'}}
+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+
| action             | min (sec) | avg (sec) | max (sec) | 90 percentile | 95 percentile | success | count |
+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+
| nova.boot_server   | 6.708     | 13.289    | 37.405    | 34.299        | 35.852        | 100.0%  | 10    |
| nova.delete_server | 2.347     | 3.872     | 5.509     | 4.932         | 5.22          | 100.0%  | 10    |
| total              | 9.408     | 17.16     | 39.752    | 38.566        | 39.159        | 100.0%  | 10    |
+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+
Load duration: 85.8980619907
Full duration: 97.1042778492

HINTS:
* To plot HTML graphics with this data, run:
	rally task report 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309 --out output.html

* To get raw JSON output of task results, run:
	rally task results 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309

Using task: 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309
root@rally:~#
</code></pre><p>跑完之後就會出現如上方範例的簡易報告，如果想要詳盡的報告內容，可以按照提示執行 <code>rally task report &lt;uuid&gt; --out &lt;html file&gt;</code> 就可以產生 html 檔案。</p>
<p>Benchmark 參數說明請參考: https://wiki.openstack.org/wiki/Rally/Concepts</p>
<p>另外，Rally 官方也提供了安裝在 docker 的方法，以及如果 Rally 是安裝在 OpenStack controller 時，也有幾個比較簡易的步驟可以參考: http://rally.readthedocs.org/en/latest/tutorial.html</p>
<hr>
<h1 id="troubleshooting">Troubleshooting</h1>
<h2 id="schema-validation-error">Schema validation error</h2>
<p>執行命令 <code>rally deployment create --filename=&lt;json file&gt; --name=&lt;name of Openstack deployment&gt;</code> 時發生以下錯誤:</p>
<pre><code>root@rally:~# rally deployment create --filename=mystack.json --name=myStack
2015-02-24 03:11:33.579 23212 ERROR rally.api [-] Deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783: Schema validation error.
Config schema validation error: {'admin': {'username': 'admin', 'password': 'myStackAdmin', 'tenant': 'benchmark'}, 'auth_url': 'http://myopenstack:5000/v2.0/', 'type': 'ExistingCloud'} is not valid under any of the given schemas

Failed validating 'anyOf' in schema:
    {'anyOf': [{'properties': {'admin': {'$ref': '#/definitions/user'}},
                'required': ['type', 'auth_url', 'admin']},
               {'required': ['type', 'auth_url', 'users'],
                'users': {'items': {'$ref': '#/definitions/user'},
                          'type': 'array'}}],
     'definitions': {'user': {'oneOf': [{'properties': {'tenant_name': {'type': 'string'}},
                                         'required': ['username',
                                                      'password',
                                                      'tenant_name']},
                                        {'properties': {'project_domain_name': {'type': 'string'},
                                                        'project_name': {'type': 'string'},
                                                        'user_domain_name': {'type': 'string'}},
                                         'required': ['username',
                                                      'password',
                                                      'project_name']}],
                              'properties': {'password': {'type': 'string'},
                                             'username': {'type': 'string'}},
                              'type': 'object'}},
     'properties': {'auth_url': {'type': 'string'},
                    'endpoint_type': {'enum': ['admin',
                                               'internal',
                                               'public'],
                                      'type': 'string'},
                    'region_name': {'type': 'string'},
                    'type': {'type': 'string'}},
     'type': 'object'}

On instance:
    {'admin': {'password': 'myStackAdmin',
               'tenant': 'benchmark',
               'username': 'admin'},
     'auth_url': 'http://myopenstack:5000/v2.0/',
     'type': 'ExistingCloud'}.
root@rally:~#
</code></pre><p>這時候執行 <code>rally deployment list</code> 可以看到 deployment 的狀態是 failed</p>
<pre><code>root@rally:~# rally deployment list
+--------------------------------------+----------------------------+---------+----------------+--------+
| uuid                                 | created_at                 | name    | status         | active |
+--------------------------------------+----------------------------+---------+----------------+--------+
| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-&gt;failed |        |
+--------------------------------------+----------------------------+---------+----------------+--------+
root@rally:~#
</code></pre><p>雖然這時候，執行 <code>rally deployment recreate --deployment &lt;uuid of deployment&gt;</code> 就會<strong>看似</strong>恢復正常。</p>
<pre><code>root@rally:~# rally deployment recreate --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783
root@rally:~# rally deployment list
+--------------------------------------+----------------------------+---------+------------------+--------+
| uuid                                 | created_at                 | name    | status           | active |
+--------------------------------------+----------------------------+---------+------------------+--------+
| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-&gt;finished |        |
+--------------------------------------+----------------------------+---------+------------------+--------+
root@rally:~# rally use deployment --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783
Using deployment: 59dc5f2c-a83a-42d8-bf49-777ff5e32783
~/.rally/openrc was updated

HINTS:
* To get your cloud resources, run:
	rally show [flavors|images|keypairs|networks|secgroups]

* To use standard OpenStack clients, set up your env by running:
	source ~/.rally/openrc
  OpenStack clients are now configured, e.g run:
	glance image-list
root@rally:~#
</code></pre><p>但是要做其他動作就會發生錯誤，例如:</p>
<pre><code>root@rally:~# rally deployment check
Authentication Issues: user rally doesn't have 'admin' role.
</code></pre><p><strong>這是因為<a href="https://wiki.openstack.org/wiki/Rally/HowTo#Step_1._Deployment_initialization_.28use_existing_cloud.29">OpenStack Wiki 教學文</a>裡，deployment.json 少了一些參數。如果是直接從 source code 裡面的 sample 中複製並修改，就不會發生這個問題。</strong></p>
<hr>
<h2 id="connectionrefused-unable-to-establish-connection-openstack-api-endpoint">ConnectionRefused: Unable to establish connection OpenStack API endpoint</h2>
<pre><code>root@rally:~# rally deployment check
keystone endpoints are valid and following services are available:
Command failed, please check log for more info
2015-02-24 03:48:00.930 24945 CRITICAL rally [-] ConnectionRefused: Unable to establish connection to http://quanta-42.sslab.cs.nthu.edu.tw:35357/v2.0/OS-KSADM/services
2015-02-24 03:48:00.930 24945 TRACE rally Traceback (most recent call last):
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/bin/rally&quot;, line 10, in &lt;module&gt;
2015-02-24 03:48:00.930 24945 TRACE rally     sys.exit(main())
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/main.py&quot;, line 42, in main
2015-02-24 03:48:00.930 24945 TRACE rally     return cliutils.run(sys.argv, categories)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/cliutils.py&quot;, line 318, in run
2015-02-24 03:48:00.930 24945 TRACE rally     ret = fn(*fn_args, **fn_kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&lt;string&gt;&quot;, line 2, in check
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/envutils.py&quot;, line 66, in default_from_global
2015-02-24 03:48:00.930 24945 TRACE rally     return f(*args, **kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/rally/cmd/commands/deployment.py&quot;, line 248, in check
2015-02-24 03:48:00.930 24945 TRACE rally     for service in client.services.list():
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/v2_0/services.py&quot;, line 32, in list
2015-02-24 03:48:00.930 24945 TRACE rally     return self._list(&quot;/OS-KSADM/services&quot;, &quot;OS-KSADM:services&quot;)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/base.py&quot;, line 113, in _list
2015-02-24 03:48:00.930 24945 TRACE rally     resp, body = self.client.get(url, **kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/adapter.py&quot;, line 164, in get
2015-02-24 03:48:00.930 24945 TRACE rally     return self.request(url, 'GET', **kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/adapter.py&quot;, line 200, in request
2015-02-24 03:48:00.930 24945 TRACE rally     resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/adapter.py&quot;, line 89, in request
2015-02-24 03:48:00.930 24945 TRACE rally     return self.session.request(url, method, **kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/utils.py&quot;, line 318, in inner
2015-02-24 03:48:00.930 24945 TRACE rally     return func(*args, **kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/session.py&quot;, line 369, in request
2015-02-24 03:48:00.930 24945 TRACE rally     resp = send(**kwargs)
2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;/usr/local/lib/python2.7/dist-packages/keystoneclient/session.py&quot;, line 412, in _send_request
2015-02-24 03:48:00.930 24945 TRACE rally     raise exceptions.ConnectionRefused(msg)
2015-02-24 03:48:00.930 24945 TRACE rally ConnectionRefused: Unable to establish connection to http://quanta-42:35357/v2.0/OS-KSADM/services
2015-02-24 03:48:00.930 24945 TRACE rally
root@rally:~#
</code></pre><p>我會發生這個問題是因為，我將 Rally 安裝在 OpenStack 之外，而 <code>rally deployment check</code> 會 call internal url (或是 admin url 我不是很確定)而非 public url。不過解決方法很簡單，<strong>只要將 IP 與 hostname 對應設定到 /etc/hosts 上即可。</strong></p>

      </article>
      

      
<div id="disqus_thread" class="mt-12"></div>
<script>
var disqus_config = function () {
  this.page.url = "https://maple52046.github.io/posts/rally-installation/";
  this.page.identifier = "2e3a088ad18bff9d5dfc51097608336c";
  this.page.title = "Install Rally 筆記 (OpenStack benchmark)";
};

(function() {
  window.setTimeout(function() {
    var d = document;
    if (['localhost', '127.0.0.1'].indexOf(window.location.hostname) != -1) {
      d.getElementById('disqus_thread').innerHTML = '<div class="text-center">Disqus disabled during local preview.</div>';
      return;
    }

    var s = d.createElement('script');
    s.src = 'https://maple52046-githubio.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    s.setAttribute("defer", "");
    d.body.appendChild(s);
  }, 2500);
})();
</script>

    </div>
<aside class="toc" style="position: sticky;top: 2rem; align-self: start;">
  <nav id="TableOfContents">
  <ul>
    <li><a href="#實驗環境">實驗環境</a></li>
    <li><a href="#install-rally">Install Rally</a></li>
    <li><a href="#deployment-initialization">Deployment initialization</a>
      <ul>
        <li><a href="#step-1">Step 1</a></li>
        <li><a href="#step-2">Step 2</a></li>
      </ul>
    </li>
    <li><a href="#benchmarking-openstack">Benchmarking OpenStack</a>
      <ul>
        <li><a href="#step-1-1">Step 1</a></li>
      </ul>
    </li>
    <li><a href="#step-2-1">Step 2</a></li>
  </ul>

  <ul>
    <li><a href="#schema-validation-error">Schema validation error</a></li>
    <li><a href="#connectionrefused-unable-to-establish-connection-openstack-api-endpoint">ConnectionRefused: Unable to establish connection OpenStack API endpoint</a></li>
  </ul>
</nav>
</aside>

  </div>
</div>

  </main>
  <footer class="footer">
  <div class="ax-l-i max-w-6xl">
    <nav class="flex items-center justify-center">
      <a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href="/posts/">Posts</a>
      <a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href="/about/">About</a>
      <a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href="/contact/">Contact</a>
      <a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href="/privacy/">Privacy</a>
    </nav>
    <div class="footer-social flex items-center justify-center mt-4">
      <a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target="_blank" rel="noopener nofollow" title="" href="https://github.com/maple52046"><svg class="fill-current" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.998 0C7.164 0 0 7.35 0 16.417 0 23.67 4.584 29.82 10.944 31.994c.8.15 1.092-.356 1.092-.79l-.022-2.792c-4.45.99-5.4-2.202-5.4-2.202-.726-1.896-1.776-2.4-1.776-2.4-1.454-1.018.108-.998.108-.998 1.606.117 2.45 1.693 2.45 1.693 1.428 2.507 3.746 1.784 4.658 1.363.144-1.06.558-1.784 1.016-2.195-3.552-.415-7.288-1.823-7.288-8.113 0-1.792.624-3.258 1.648-4.406-.166-.415-.714-2.085.156-4.344 0 0 1.344-.44 4.4 1.683 1.276-.364 2.644-.546 4.006-.552a14.98 14.98 0 0 1 4.006.554C23.062 6.37 24.404 6.8 24.404 6.8c.872 2.26.324 3.93.16 4.344 1.026 1.148 1.644 2.614 1.644 4.406 0 6.306-3.74 7.694-7.304 8.1.574.507 1.086 1.51 1.086 3.04l-.02 4.503c0 .44.288.95 1.1.788C27.42 29.817 32 23.667 32 16.417 32 7.35 24.836 0 15.998 0z"/></svg></a>
      <a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target="_blank" rel="noopener nofollow" title="" href="https://www.linkedin.com/in/kuchenhao"><svg class="fill-current" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M29.692 0H2.308A2.31 2.31 0 0 0 0 2.308v27.384A2.31 2.31 0 0 0 2.308 32h27.384A2.31 2.31 0 0 0 32 29.692V2.308A2.31 2.31 0 0 0 29.692 0zM11.35 24.188H7.454V12.464h3.897v11.723zM9.402 10.863h-.025c-1.308 0-2.153-.9-2.153-2.025 0-1.15.872-2.026 2.205-2.026s2.153.875 2.18 2.026c0 1.125-.846 2.025-2.205 2.025zm16 13.324h-3.896v-6.272c0-1.576-.564-2.65-1.974-2.65-1.076 0-1.717.725-2 1.425-.103.25-.128.6-.128.95v6.547h-3.896V12.464h3.896v1.66c.518-.8 1.444-1.935 3.512-1.935 2.564 0 4.486 1.676 4.486 5.276v6.722z"/></svg></a>
      <a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target="_blank" rel="noopener nofollow" title="" href="https://twitter.com/maple52046"><svg class="fill-current" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M32 6.078c-1.2.522-2.458.868-3.78 1.036 1.36-.812 2.398-2.088 2.886-3.626a13.11 13.11 0 0 1-4.16 1.588C25.742 3.794 24.026 3 22.154 3a6.56 6.56 0 0 0-6.556 6.562c0 .52.044 1.02.152 1.496-5.454-.266-10.28-2.88-13.522-6.862-.566.982-.898 2.106-.898 3.316a6.57 6.57 0 0 0 2.914 5.452 6.48 6.48 0 0 1-2.964-.808v.072c0 3.188 2.274 5.836 5.256 6.446-.534.146-1.116.216-1.72.216-.42 0-.844-.024-1.242-.112.85 2.598 3.262 4.508 6.13 4.57a13.18 13.18 0 0 1-8.134 2.798c-.538 0-1.054-.024-1.57-.1C2.906 27.93 6.35 29 10.064 29c12.072 0 18.672-10 18.672-18.668 0-.3-.01-.57-.024-.848C30.014 8.56 31.108 7.406 32 6.078z"/></svg></a>
      <a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target="_blank" rel="noopener nofollow" title="" href="https://www.instagram.com/bill0155"><svg class="fill-current" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M4 32h24c2.258 0 4-1.742 4-4V4c0-2.26-1.742-4-4-4H4C1.74 0 0 1.74 0 4v24c0 2.258 1.74 4 4 4zM22 5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V5zm-5.977 4.714c3.55 0 6.425 2.787 6.425 6.226s-2.876 6.226-6.425 6.226S9.6 19.377 9.6 15.94s2.878-6.226 6.423-6.226zM4 13l2.493.542c-.274.89-.413 1.815-.413 2.745 0 5.318 4.454 9.634 9.943 9.634s9.944-4.315 9.944-9.634c0-.955-.145-1.875-.412-2.745L28 13v14c0 .7-.3 1-1 1H5c-.7 0-1-.3-1-1V13z"/></svg></a>
    </div>

    <div class="footer-copyright text-sm text-center text-gray-500 mt-4">
      &#169; 2019-2020 世界的盡頭
    </div>
    <div class="text-sm sm:text-xs text-center text-gray-500 mt-2">
       <a href="https://www.axiomtheme.com/?utm_source=theme-footer&utm_medium=website&utm_campaign=referral"></a>
    </div>
  </div>
</footer>

<script src="/bundle.js?v=1598602884"></script>

<script async data-ad-client="ca-pub-5109345729123489" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</body>
</html>
