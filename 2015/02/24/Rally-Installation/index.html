
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="世界的盡頭">
    <title>Install Rally 筆記 (OpenStack benchmark) - 世界的盡頭</title>
    <meta name="author" content="古振浩 Chen-Hao Ku">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"古振浩 Chen-Hao Ku","sameAs":["https://github.com/maple52046","https://twitter.com/maple52046","https://www.facebook.com/maple52046","https://www.linkedin.com/in/kuchenhao/","mailto:maple52046@gmail.com"],"image":"https://www.gravatar.com/avatar/79384e4270ffd7a2d23fc41b7533db73"},"articleBody":"Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。\n實驗環境\n\n\nItem\nValue\n\n\n\nOperating System\nUbuntu 12.04 x64\n\n\nPython version\nPython 2.7\n\n\nOpenStack version\nGrizzly (2013)\n\n\nInstall Rally一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。\n直接在 OpenStack 上開了一個新的 VM，一樣是選擇 Ubuntu 12.04，就可以直接安裝。(不過現在回想起來，應該要用 virtualenv 來裝就可以解決，也不會影響原本的系統。)\n\n\n\nPS: Rally 可以跟 DevStack 一起部署。參考: Rally with DevStack all in one installation\n\nStep:\n\n下載 source code \n1root@rally:~# git clone https:&#x2F;&#x2F;git.openstack.org&#x2F;stackforge&#x2F;rally\n\n執行 script\n1root@rally:~# .&#x2F;rally&#x2F;install_rally.sh\n\n安裝並執行 tox (當前版本可以跳過此步驟)\n12root@rally:~# pip install &#39;tox&#x3D;&#x3D;1.6.1&#39;root@rally:~# tox\n\n\n\nDeployment initialization安裝完 Rally 之後，再進行下一步之前，必須要確定該 host 可以使用 OpenStack API\n建立 OpenStack credentials (openrc)，然後看看 keystone client 是否可已使用:\n建立 RC file:\nopenrc123456export OS_TENANT_NAME=adminexport OS_USERNAE=adminexport OS_PASSWORD=myStackAdminexport OS_AUTH_URL=\"http://myopenstack:5000/v2.0/\"export OS_SERVICE_ENDPOINT=\"http://myopenstack:35357/v2.0\"export OS_SERVICE_TOKEN=myOpenStackAdminToken28143\n\n測試 keystone 指令是否能使用:  (keystone client 已經在 install_rally.sh 的時候就安裝了，不需要額外裝)\n123root@localhost:~# source openrcroot@localhost:~# keystone tenant-list... (省略) ...\n\n接下來要設定 deployment\nStep 1首先，複製 samples 裡面的 existing.json，並修改參數\n1root@rally:~# cp rally&#x2F;samples&#x2F;deployments&#x2F;existing.json .&#x2F;\n\nmystack.json1234567891011&#123;    \"type\": \"ExistingCloud\",    \"auth_url\": \"http://myopenstack:5000/v2.0/\",    \"region_name\": \"RegionOne\",    \"endpoint_type\": \"public\",    \"admin\": &#123;        \"username\": \"admin\",        \"password\": \"myStackAdmin\",        \"tenant_name\": \"benchmark\"    &#125;&#125;\n\n\ntype 的部分不能換改\nauth_url 這個參數只要使用 public url 的就可以了\nUser 一定要是具有 admin role 的 user；tenant 則不一定要特地建立專門使用的，因為測試的過程不會使用到自己的 tenant。\n\n接著執行命令 rally deployment create --filename=&lt;json file&gt; --name=&lt;name of Openstack deployment&gt;\n123456789101112131415161718root@rally:~# rally deployment create --filename existing.json --name myStack+--------------------------------------+----------------------------+---------+------------------+--------+| uuid                                 | created_at                 | name    | status           | active |+--------------------------------------+----------------------------+---------+------------------+--------+| 3070593f-c583-4bcf-85a8-7dc7345ad146 | 2015-02-24 03:45:37.088393 | myStack | deploy-&gt;finished |        |+--------------------------------------+----------------------------+---------+------------------+--------+Using deployment: 3070593f-c583-4bcf-85a8-7dc7345ad146~&#x2F;.rally&#x2F;openrc was updatedHINTS:* To get your cloud resources, run:\trally show [flavors|images|keypairs|networks|secgroups]* To use standard OpenStack clients, set up your env by running:\tsource ~&#x2F;.rally&#x2F;openrc  OpenStack clients are now configured, e.g run:\tglance image-listroot@rally:~#\n\n這時候執行 rally show [option] 可以看到 Openstack 資訊\n123456789root@rally:~# rally show images+--------------------------------------+------------------------------+------------+| UUID                                 | Name                         | Size (B)   |+--------------------------------------+------------------------------+------------+| 53c59f00-509a-4056-b5b2-ff1984c9323f | Ubuntu 14.04 (Cloud Image)   | 256836096  || 75426fa5-f73b-46a4-84fa-4a44f9cbc9fb | Ubuntu 12.04 (Cloud Image)   | 261423616  || 7bd19a5c-0eba-439c-a627-599df9d9ad4d | CentOS 7                     | 418688512  |+--------------------------------------+------------------------------+------------+root@rally:~#\n\nStep 2接下來，執行 rally deployment check\n12345678910111213root@rally:~# rally deployment checkkeystone endpoints are valid and following services are available:+----------+----------+-----------+| services | type     | status    |+----------+----------+-----------+| cinder   | volume   | Available || ec2      | ec2      | Available || glance   | image    | Available || keystone | identity | Available || nova     | compute  | Available || quantum  | network  | Available |+----------+----------+-----------+root@rally:~#\n\nBenchmarking OpenStack接下來跑一個 benchmark 的範例\nStep 1從 sample 中複製 benchmark task 範例\n1cp samples&#x2F;tasks&#x2F;scenarios&#x2F;nova&#x2F;boot-and-delete.json .&#x2F;task-1.json\n\n修改 task 內容\ntask-1.json1234567891011121314151617181920212223242526&#123;    \"NovaServers.boot_and_delete_server\": [        &#123;            \"args\": &#123;                \"flavor\": &#123;                    \"name\": \"m1.tiny\"                &#125;,                \"image\": &#123;                    \"name\": \"CirrOS 0.3.3\"                &#125;,                \"force_delete\": false            &#125;,            \"runner\": &#123;                \"type\": \"constant\",                \"times\": 10,                \"concurrency\": 2            &#125;,            \"context\": &#123;                \"users\": &#123;                    \"tenants\": 3,                    \"users_per_tenant\": 2                &#125;            &#125;        &#125;    ]&#125;\n\nFlavor name、image name 可以用 rally show [option] 去抓取。另外，根據 OpenStack Wiki 的資料， flavor 與 image 可以改用提供 id、uuid 的方式。\n1234\"args\": &#123;   \"flavor_id\": 42,    \"image_id\": \"73257560-c59b-4275-a1ec-ab140e5b9979\"&#125;,\n\nStep 2接下來，執行 rally -v task start &lt;task json file&gt; --tag &lt;task name&gt;\n最後會出現:\n123456789101112131415161718192021222324252627282930313233343536373839root@rally:~# rally -v task start task-1.json --tag &quot;Task 1&quot;... (過程省略) ...--------------------------------------------------------------------------------Task 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309: finished--------------------------------------------------------------------------------test scenario NovaServers.boot_and_delete_serverargs position 0args values:&#123;u&#39;args&#39;: &#123;u&#39;flavor&#39;: &#123;u&#39;name&#39;: u&#39;m1.tiny&#39;&#125;,           u&#39;force_delete&#39;: False,           u&#39;image&#39;: &#123;u&#39;name&#39;: u&#39;CirrOS 0.3.3&#39;&#125;&#125;, u&#39;context&#39;: &#123;u&#39;users&#39;: &#123;u&#39;project_domain&#39;: u&#39;default&#39;,                         u&#39;resource_management_workers&#39;: 30,                         u&#39;tenants&#39;: 3,                         u&#39;user_domain&#39;: u&#39;default&#39;,                         u&#39;users_per_tenant&#39;: 2&#125;&#125;, u&#39;runner&#39;: &#123;u&#39;concurrency&#39;: 2, u&#39;times&#39;: 10, u&#39;type&#39;: u&#39;constant&#39;&#125;&#125;+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+| action             | min (sec) | avg (sec) | max (sec) | 90 percentile | 95 percentile | success | count |+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+| nova.boot_server   | 6.708     | 13.289    | 37.405    | 34.299        | 35.852        | 100.0%  | 10    || nova.delete_server | 2.347     | 3.872     | 5.509     | 4.932         | 5.22          | 100.0%  | 10    || total              | 9.408     | 17.16     | 39.752    | 38.566        | 39.159        | 100.0%  | 10    |+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+Load duration: 85.8980619907Full duration: 97.1042778492HINTS:* To plot HTML graphics with this data, run:\trally task report 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309 --out output.html* To get raw JSON output of task results, run:\trally task results 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309Using task: 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309root@rally:~#\n\n跑完之後就會出現如上方範例的簡易報告，如果想要詳盡的報告內容，可以按照提示執行 rally task report &lt;uuid&gt; --out &lt;html file&gt; 就可以產生 html 檔案。\nBenchmark 參數說明請參考: https://wiki.openstack.org/wiki/Rally/Concepts\n另外，Rally 官方也提供了安裝在 docker 的方法，以及如果 Rally 是安裝在 OpenStack controller 時，也有幾個比較簡易的步驟可以參考: http://rally.readthedocs.org/en/latest/tutorial.html\n\nTroubleshootingSchema validation error執行命令 rally deployment create --filename=&lt;json file&gt; --name=&lt;name of Openstack deployment&gt; 時發生以下錯誤:\n123456789101112131415161718192021222324252627282930313233343536373839root@rally:~# rally deployment create --filename&#x3D;mystack.json --name&#x3D;myStack2015-02-24 03:11:33.579 23212 ERROR rally.api [-] Deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783: Schema validation error.Config schema validation error: &#123;&#39;admin&#39;: &#123;&#39;username&#39;: &#39;admin&#39;, &#39;password&#39;: &#39;myStackAdmin&#39;, &#39;tenant&#39;: &#39;benchmark&#39;&#125;, &#39;auth_url&#39;: &#39;http:&#x2F;&#x2F;myopenstack:5000&#x2F;v2.0&#x2F;&#39;, &#39;type&#39;: &#39;ExistingCloud&#39;&#125; is not valid under any of the given schemasFailed validating &#39;anyOf&#39; in schema:    &#123;&#39;anyOf&#39;: [&#123;&#39;properties&#39;: &#123;&#39;admin&#39;: &#123;&#39;$ref&#39;: &#39;#&#x2F;definitions&#x2F;user&#39;&#125;&#125;,                &#39;required&#39;: [&#39;type&#39;, &#39;auth_url&#39;, &#39;admin&#39;]&#125;,               &#123;&#39;required&#39;: [&#39;type&#39;, &#39;auth_url&#39;, &#39;users&#39;],                &#39;users&#39;: &#123;&#39;items&#39;: &#123;&#39;$ref&#39;: &#39;#&#x2F;definitions&#x2F;user&#39;&#125;,                          &#39;type&#39;: &#39;array&#39;&#125;&#125;],     &#39;definitions&#39;: &#123;&#39;user&#39;: &#123;&#39;oneOf&#39;: [&#123;&#39;properties&#39;: &#123;&#39;tenant_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,                                         &#39;required&#39;: [&#39;username&#39;,                                                      &#39;password&#39;,                                                      &#39;tenant_name&#39;]&#125;,                                        &#123;&#39;properties&#39;: &#123;&#39;project_domain_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,                                                        &#39;project_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,                                                        &#39;user_domain_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,                                         &#39;required&#39;: [&#39;username&#39;,                                                      &#39;password&#39;,                                                      &#39;project_name&#39;]&#125;],                              &#39;properties&#39;: &#123;&#39;password&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,                                             &#39;username&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,                              &#39;type&#39;: &#39;object&#39;&#125;&#125;,     &#39;properties&#39;: &#123;&#39;auth_url&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,                    &#39;endpoint_type&#39;: &#123;&#39;enum&#39;: [&#39;admin&#39;,                                               &#39;internal&#39;,                                               &#39;public&#39;],                                      &#39;type&#39;: &#39;string&#39;&#125;,                    &#39;region_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,                    &#39;type&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,     &#39;type&#39;: &#39;object&#39;&#125;On instance:    &#123;&#39;admin&#39;: &#123;&#39;password&#39;: &#39;myStackAdmin&#39;,               &#39;tenant&#39;: &#39;benchmark&#39;,               &#39;username&#39;: &#39;admin&#39;&#125;,     &#39;auth_url&#39;: &#39;http:&#x2F;&#x2F;myopenstack:5000&#x2F;v2.0&#x2F;&#39;,     &#39;type&#39;: &#39;ExistingCloud&#39;&#125;.root@rally:~#\n\n這時候執行 rally deployment list 可以看到 deployment 的狀態是 failed\n1234567root@rally:~# rally deployment list+--------------------------------------+----------------------------+---------+----------------+--------+| uuid                                 | created_at                 | name    | status         | active |+--------------------------------------+----------------------------+---------+----------------+--------+| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-&gt;failed |        |+--------------------------------------+----------------------------+---------+----------------+--------+root@rally:~#\n\n雖然這時候，執行 rally deployment recreate --deployment &lt;uuid of deployment&gt; 就會看似恢復正常。\n1234567891011121314151617181920root@rally:~# rally deployment recreate --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783root@rally:~# rally deployment list+--------------------------------------+----------------------------+---------+------------------+--------+| uuid                                 | created_at                 | name    | status           | active |+--------------------------------------+----------------------------+---------+------------------+--------+| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-&gt;finished |        |+--------------------------------------+----------------------------+---------+------------------+--------+root@rally:~# rally use deployment --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783Using deployment: 59dc5f2c-a83a-42d8-bf49-777ff5e32783~&#x2F;.rally&#x2F;openrc was updatedHINTS:* To get your cloud resources, run:\trally show [flavors|images|keypairs|networks|secgroups]* To use standard OpenStack clients, set up your env by running:\tsource ~&#x2F;.rally&#x2F;openrc  OpenStack clients are now configured, e.g run:\tglance image-listroot@rally:~#\n\n但是要做其他動作就會發生錯誤，例如:\n12root@rally:~# rally deployment checkAuthentication Issues: user rally doesn&#39;t have &#39;admin&#39; role.\n\n這是因為OpenStack Wiki 教學文裡，deployment.json 少了一些參數。如果是直接從 source code 裡面的 sample 中複製並修改，就不會發生這個問題。\n\nConnectionRefused: Unable to establish connection OpenStack API endpoint1234567891011121314151617181920212223242526272829303132333435root@rally:~# rally deployment checkkeystone endpoints are valid and following services are available:Command failed, please check log for more info2015-02-24 03:48:00.930 24945 CRITICAL rally [-] ConnectionRefused: Unable to establish connection to http:&#x2F;&#x2F;quanta-42.sslab.cs.nthu.edu.tw:35357&#x2F;v2.0&#x2F;OS-KSADM&#x2F;services2015-02-24 03:48:00.930 24945 TRACE rally Traceback (most recent call last):2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;rally&quot;, line 10, in &lt;module&gt;2015-02-24 03:48:00.930 24945 TRACE rally     sys.exit(main())2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;main.py&quot;, line 42, in main2015-02-24 03:48:00.930 24945 TRACE rally     return cliutils.run(sys.argv, categories)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;cliutils.py&quot;, line 318, in run2015-02-24 03:48:00.930 24945 TRACE rally     ret &#x3D; fn(*fn_args, **fn_kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&lt;string&gt;&quot;, line 2, in check2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;envutils.py&quot;, line 66, in default_from_global2015-02-24 03:48:00.930 24945 TRACE rally     return f(*args, **kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;commands&#x2F;deployment.py&quot;, line 248, in check2015-02-24 03:48:00.930 24945 TRACE rally     for service in client.services.list():2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;v2_0&#x2F;services.py&quot;, line 32, in list2015-02-24 03:48:00.930 24945 TRACE rally     return self._list(&quot;&#x2F;OS-KSADM&#x2F;services&quot;, &quot;OS-KSADM:services&quot;)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;base.py&quot;, line 113, in _list2015-02-24 03:48:00.930 24945 TRACE rally     resp, body &#x3D; self.client.get(url, **kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;adapter.py&quot;, line 164, in get2015-02-24 03:48:00.930 24945 TRACE rally     return self.request(url, &#39;GET&#39;, **kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;adapter.py&quot;, line 200, in request2015-02-24 03:48:00.930 24945 TRACE rally     resp &#x3D; super(LegacyJsonAdapter, self).request(*args, **kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;adapter.py&quot;, line 89, in request2015-02-24 03:48:00.930 24945 TRACE rally     return self.session.request(url, method, **kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;utils.py&quot;, line 318, in inner2015-02-24 03:48:00.930 24945 TRACE rally     return func(*args, **kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;session.py&quot;, line 369, in request2015-02-24 03:48:00.930 24945 TRACE rally     resp &#x3D; send(**kwargs)2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;session.py&quot;, line 412, in _send_request2015-02-24 03:48:00.930 24945 TRACE rally     raise exceptions.ConnectionRefused(msg)2015-02-24 03:48:00.930 24945 TRACE rally ConnectionRefused: Unable to establish connection to http:&#x2F;&#x2F;quanta-42:35357&#x2F;v2.0&#x2F;OS-KSADM&#x2F;services2015-02-24 03:48:00.930 24945 TRACE rally root@rally:~#\n\n我會發生這個問題是因為，我將 Rally 安裝在 OpenStack 之外，而 rally deployment check 會 call internal url (或是 admin url 我不是很確定)而非 public url。不過解決方法很簡單，只要將 IP 與 hostname 對應設定到 /etc/hosts 上即可。\n","dateCreated":"2015-02-24T16:45:00+08:00","dateModified":"2019-12-13T02:17:56+08:00","datePublished":"2015-02-24T16:45:00+08:00","description":"Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。\n實驗環境\n\n\nItem\nValue\n\n\n\nOperating System\nUbuntu 12.04 x64\n\n\nPython version\nPython 2.7\n\n\nOpenStack version\nGrizzly (2013)\n\n\nInstall Rally一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。\n直接在 OpenStack 上開了一個新的 VM，一樣是選擇 Ubuntu 12.04，就可以直接安裝。(不過現在回想起來，應該要用 virtualenv 來裝就可以解決，也不會影響原本的系統。)","headline":"Install Rally 筆記 (OpenStack benchmark)","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://maple52046.github.io/2015/02/24/Rally-Installation/"},"publisher":{"@type":"Organization","name":"古振浩 Chen-Hao Ku","sameAs":["https://github.com/maple52046","https://twitter.com/maple52046","https://www.facebook.com/maple52046","https://www.linkedin.com/in/kuchenhao/","mailto:maple52046@gmail.com"],"image":"https://www.gravatar.com/avatar/79384e4270ffd7a2d23fc41b7533db73","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/79384e4270ffd7a2d23fc41b7533db73"}},"url":"https://maple52046.github.io/2015/02/24/Rally-Installation/","keywords":"OpenStack"}</script>
    <meta name="description" content="Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。 實驗環境   Item Value    Operating System Ubuntu 12.04 x64   Python version Python 2.7   OpenSt">
<meta property="og:type" content="blog">
<meta property="og:title" content="Install Rally 筆記 (OpenStack benchmark)">
<meta property="og:url" content="https:&#x2F;&#x2F;maple52046.github.io&#x2F;2015&#x2F;02&#x2F;24&#x2F;Rally-Installation&#x2F;index.html">
<meta property="og:site_name" content="世界的盡頭">
<meta property="og:description" content="Rally 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 OpenStack 官方 Wiki 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。 實驗環境   Item Value    Operating System Ubuntu 12.04 x64   Python version Python 2.7   OpenSt">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2015-02-24T08:45:00.000Z">
<meta property="article:modified_time" content="2019-12-12T18:17:56.462Z">
<meta property="article:author" content="古振浩 Chen-Hao Ku">
<meta property="article:tag" content="OpenStack">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@titan1782">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-7yv7uj2hjiyfxjpniqemlgo6xmfv4x3o4kblstx6a7uhun0eclzenhgguigr.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-79529428-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-79529428-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            世界的盡頭
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/index.html"
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/maple52046" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/maple52046" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.facebook.com/maple52046" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/in/kuchenhao/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:maple52046@gmail.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Install Rally 筆記 (OpenStack benchmark)
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-02-24T16:45:00+08:00">
	
		    Feb 24, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/OpenStack/">OpenStack</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p><a href="http://rally.readthedocs.org/en/latest/index.html" target="_blank" rel="noopener">Rally</a> 是一套 OpenStack benchmark tool。關於 Rally 的介紹本文就不再贅述。本篇安裝時是以 <a href="https://wiki.openstack.org/wiki/Rally#How_To" target="_blank" rel="noopener">OpenStack 官方 Wiki</a> 的教學為參考內容，紀錄安裝與使用 Rally 的筆記。</p>
<h2 id="實驗環境"><a href="#實驗環境" class="headerlink" title="實驗環境"></a>實驗環境</h2><table>
<thead>
<tr>
<th>Item</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>Operating System</td>
<td>Ubuntu 12.04 x64</td>
</tr>
<tr>
<td>Python version</td>
<td>Python 2.7</td>
</tr>
<tr>
<td>OpenStack version</td>
<td>Grizzly (2013)</td>
</tr>
</tbody></table>
<h2 id="Install-Rally"><a href="#Install-Rally" class="headerlink" title="Install Rally"></a>Install Rally</h2><p>一開始我是想要安裝在 OpenStack controller node 上，但是一直裝不起來，看起來似乎是 python module 的版本問題，不過我沒有仔細研究到底是哪個 module 的哪個版本卡住。</p>
<p>直接在 OpenStack 上開了一個新的 VM，一樣是選擇 Ubuntu 12.04，就可以直接安裝。<em>(不過現在回想起來，應該要用 virtualenv 來裝就可以解決，也不會影響原本的系統。)</em></p>
<a id="more"></a>

<blockquote>
<p>PS: Rally 可以跟 DevStack 一起部署。參考: <a href="https://wiki.openstack.org/wiki/Rally/installation#Rally_with_DevStack_all_in_one_installation" target="_blank" rel="noopener">Rally with DevStack all in one installation</a></p>
</blockquote>
<p><strong>Step</strong>:</p>
<ol>
<li><p>下載 source code </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# git clone https:&#x2F;&#x2F;git.openstack.org&#x2F;stackforge&#x2F;rally</span><br></pre></td></tr></table></figure>
</li>
<li><p>執行 script</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# .&#x2F;rally&#x2F;install_rally.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>安裝並執行 tox (當前版本可以跳過此步驟)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# pip install &#39;tox&#x3D;&#x3D;1.6.1&#39;</span><br><span class="line">root@rally:~# tox</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Deployment-initialization"><a href="#Deployment-initialization" class="headerlink" title="Deployment initialization"></a>Deployment initialization</h2><p>安裝完 Rally 之後，再進行下一步之前，必須要確定該 host 可以使用 OpenStack API</p>
<p>建立 OpenStack credentials (openrc)，然後看看 keystone client 是否可已使用:</p>
<p>建立 RC file:</p>
<figure class="highlight bash"><figcaption><span>openrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> OS_TENANT_NAME=admin</span><br><span class="line"><span class="built_in">export</span> OS_USERNAE=admin</span><br><span class="line"><span class="built_in">export</span> OS_PASSWORD=myStackAdmin</span><br><span class="line"><span class="built_in">export</span> OS_AUTH_URL=<span class="string">"http://myopenstack:5000/v2.0/"</span></span><br><span class="line"><span class="built_in">export</span> OS_SERVICE_ENDPOINT=<span class="string">"http://myopenstack:35357/v2.0"</span></span><br><span class="line"><span class="built_in">export</span> OS_SERVICE_TOKEN=myOpenStackAdminToken28143</span><br></pre></td></tr></table></figure>

<p>測試 keystone 指令是否能使用:  <em>(keystone client 已經在 install_rally.sh 的時候就安裝了，不需要額外裝)</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@localhost:~# source openrc</span><br><span class="line">root@localhost:~# keystone tenant-list</span><br><span class="line">... (省略) ...</span><br></pre></td></tr></table></figure>

<p>接下來要設定 deployment</p>
<h3 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>首先，複製 samples 裡面的 existing.json，並修改參數</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# cp rally&#x2F;samples&#x2F;deployments&#x2F;existing.json .&#x2F;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><figcaption><span>mystack.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"ExistingCloud"</span>,</span><br><span class="line">    <span class="attr">"auth_url"</span>: <span class="string">"http://myopenstack:5000/v2.0/"</span>,</span><br><span class="line">    <span class="attr">"region_name"</span>: <span class="string">"RegionOne"</span>,</span><br><span class="line">    <span class="attr">"endpoint_type"</span>: <span class="string">"public"</span>,</span><br><span class="line">    <span class="attr">"admin"</span>: &#123;</span><br><span class="line">        <span class="attr">"username"</span>: <span class="string">"admin"</span>,</span><br><span class="line">        <span class="attr">"password"</span>: <span class="string">"myStackAdmin"</span>,</span><br><span class="line">        <span class="attr">"tenant_name"</span>: <span class="string">"benchmark"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>type 的部分不能換改</li>
<li><strong>auth_url</strong> 這個參數只要使用 public url 的就可以了</li>
<li>User 一定要是具有 admin role 的 user；tenant 則不一定要特地建立專門使用的，因為測試的過程不會使用到自己的 tenant。</li>
</ul>
<p>接著執行命令 <code>rally deployment create --filename=&lt;json file&gt; --name=&lt;name of Openstack deployment&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment create --filename existing.json --name myStack</span><br><span class="line">+--------------------------------------+----------------------------+---------+------------------+--------+</span><br><span class="line">| uuid                                 | created_at                 | name    | status           | active |</span><br><span class="line">+--------------------------------------+----------------------------+---------+------------------+--------+</span><br><span class="line">| 3070593f-c583-4bcf-85a8-7dc7345ad146 | 2015-02-24 03:45:37.088393 | myStack | deploy-&gt;finished |        |</span><br><span class="line">+--------------------------------------+----------------------------+---------+------------------+--------+</span><br><span class="line">Using deployment: 3070593f-c583-4bcf-85a8-7dc7345ad146</span><br><span class="line">~&#x2F;.rally&#x2F;openrc was updated</span><br><span class="line"></span><br><span class="line">HINTS:</span><br><span class="line">* To get your cloud resources, run:</span><br><span class="line">	rally show [flavors|images|keypairs|networks|secgroups]</span><br><span class="line"></span><br><span class="line">* To use standard OpenStack clients, set up your env by running:</span><br><span class="line">	source ~&#x2F;.rally&#x2F;openrc</span><br><span class="line">  OpenStack clients are now configured, e.g run:</span><br><span class="line">	glance image-list</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<p>這時候執行 rally show [option] 可以看到 Openstack 資訊</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally show images</span><br><span class="line">+--------------------------------------+------------------------------+------------+</span><br><span class="line">| UUID                                 | Name                         | Size (B)   |</span><br><span class="line">+--------------------------------------+------------------------------+------------+</span><br><span class="line">| 53c59f00-509a-4056-b5b2-ff1984c9323f | Ubuntu 14.04 (Cloud Image)   | 256836096  |</span><br><span class="line">| 75426fa5-f73b-46a4-84fa-4a44f9cbc9fb | Ubuntu 12.04 (Cloud Image)   | 261423616  |</span><br><span class="line">| 7bd19a5c-0eba-439c-a627-599df9d9ad4d | CentOS 7                     | 418688512  |</span><br><span class="line">+--------------------------------------+------------------------------+------------+</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<h3 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h3><p>接下來，執行 <code>rally deployment check</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment check</span><br><span class="line">keystone endpoints are valid and following services are available:</span><br><span class="line">+----------+----------+-----------+</span><br><span class="line">| services | type     | status    |</span><br><span class="line">+----------+----------+-----------+</span><br><span class="line">| cinder   | volume   | Available |</span><br><span class="line">| ec2      | ec2      | Available |</span><br><span class="line">| glance   | image    | Available |</span><br><span class="line">| keystone | identity | Available |</span><br><span class="line">| nova     | compute  | Available |</span><br><span class="line">| quantum  | network  | Available |</span><br><span class="line">+----------+----------+-----------+</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<h2 id="Benchmarking-OpenStack"><a href="#Benchmarking-OpenStack" class="headerlink" title="Benchmarking OpenStack"></a>Benchmarking OpenStack</h2><p>接下來跑一個 benchmark 的範例</p>
<h3 id="Step-1-1"><a href="#Step-1-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>從 sample 中複製 benchmark task 範例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp samples&#x2F;tasks&#x2F;scenarios&#x2F;nova&#x2F;boot-and-delete.json .&#x2F;task-1.json</span><br></pre></td></tr></table></figure>

<p>修改 task 內容</p>
<figure class="highlight json"><figcaption><span>task-1.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"NovaServers.boot_and_delete_server"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"args"</span>: &#123;</span><br><span class="line">                <span class="attr">"flavor"</span>: &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"m1.tiny"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"image"</span>: &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"CirrOS 0.3.3"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"force_delete"</span>: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"runner"</span>: &#123;</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"constant"</span>,</span><br><span class="line">                <span class="attr">"times"</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">"concurrency"</span>: <span class="number">2</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"context"</span>: &#123;</span><br><span class="line">                <span class="attr">"users"</span>: &#123;</span><br><span class="line">                    <span class="attr">"tenants"</span>: <span class="number">3</span>,</span><br><span class="line">                    <span class="attr">"users_per_tenant"</span>: <span class="number">2</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Flavor name、image name 可以用 rally show [option] 去抓取。<br>另外，根據 OpenStack Wiki 的<a href="https://wiki.openstack.org/wiki/Rally/Concepts" target="_blank" rel="noopener">資料</a>， flavor 與 image 可以改用提供 id、uuid 的方式。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"args": &#123;</span><br><span class="line">   "flavor_id": 42,</span><br><span class="line">    "image_id": "73257560-c59b-4275-a1ec-ab140e5b9979"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="Step-2-1"><a href="#Step-2-1" class="headerlink" title="Step 2"></a>Step 2</h2><p>接下來，執行 <code>rally -v task start &lt;task json file&gt; --tag &lt;task name&gt;</code></p>
<p>最後會出現:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally -v task start task-1.json --tag &quot;Task 1&quot;</span><br><span class="line"></span><br><span class="line">... (過程省略) ...</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Task 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309: finished</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">test scenario NovaServers.boot_and_delete_server</span><br><span class="line">args position 0</span><br><span class="line">args values:</span><br><span class="line">&#123;u&#39;args&#39;: &#123;u&#39;flavor&#39;: &#123;u&#39;name&#39;: u&#39;m1.tiny&#39;&#125;,</span><br><span class="line">           u&#39;force_delete&#39;: False,</span><br><span class="line">           u&#39;image&#39;: &#123;u&#39;name&#39;: u&#39;CirrOS 0.3.3&#39;&#125;&#125;,</span><br><span class="line"> u&#39;context&#39;: &#123;u&#39;users&#39;: &#123;u&#39;project_domain&#39;: u&#39;default&#39;,</span><br><span class="line">                         u&#39;resource_management_workers&#39;: 30,</span><br><span class="line">                         u&#39;tenants&#39;: 3,</span><br><span class="line">                         u&#39;user_domain&#39;: u&#39;default&#39;,</span><br><span class="line">                         u&#39;users_per_tenant&#39;: 2&#125;&#125;,</span><br><span class="line"> u&#39;runner&#39;: &#123;u&#39;concurrency&#39;: 2, u&#39;times&#39;: 10, u&#39;type&#39;: u&#39;constant&#39;&#125;&#125;</span><br><span class="line">+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+</span><br><span class="line">| action             | min (sec) | avg (sec) | max (sec) | 90 percentile | 95 percentile | success | count |</span><br><span class="line">+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+</span><br><span class="line">| nova.boot_server   | 6.708     | 13.289    | 37.405    | 34.299        | 35.852        | 100.0%  | 10    |</span><br><span class="line">| nova.delete_server | 2.347     | 3.872     | 5.509     | 4.932         | 5.22          | 100.0%  | 10    |</span><br><span class="line">| total              | 9.408     | 17.16     | 39.752    | 38.566        | 39.159        | 100.0%  | 10    |</span><br><span class="line">+--------------------+-----------+-----------+-----------+---------------+---------------+---------+-------+</span><br><span class="line">Load duration: 85.8980619907</span><br><span class="line">Full duration: 97.1042778492</span><br><span class="line"></span><br><span class="line">HINTS:</span><br><span class="line">* To plot HTML graphics with this data, run:</span><br><span class="line">	rally task report 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309 --out output.html</span><br><span class="line"></span><br><span class="line">* To get raw JSON output of task results, run:</span><br><span class="line">	rally task results 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309</span><br><span class="line"></span><br><span class="line">Using task: 9148f0ee-d5d6-42a7-a44f-d8cd81b6d309</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<p>跑完之後就會出現如上方範例的簡易報告，如果想要詳盡的報告內容，可以按照提示執行 <code>rally task report &lt;uuid&gt; --out &lt;html file&gt;</code> 就可以產生 html 檔案。</p>
<p>Benchmark 參數說明請參考: <a href="https://wiki.openstack.org/wiki/Rally/Concepts" target="_blank" rel="noopener">https://wiki.openstack.org/wiki/Rally/Concepts</a></p>
<p>另外，Rally 官方也提供了安裝在 docker 的方法，以及如果 Rally 是安裝在 OpenStack controller 時，也有幾個比較簡易的步驟可以參考: <a href="http://rally.readthedocs.org/en/latest/tutorial.html" target="_blank" rel="noopener">http://rally.readthedocs.org/en/latest/tutorial.html</a></p>
<hr>
<h1 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h1><h2 id="Schema-validation-error"><a href="#Schema-validation-error" class="headerlink" title="Schema validation error"></a>Schema validation error</h2><p>執行命令 <code>rally deployment create --filename=&lt;json file&gt; --name=&lt;name of Openstack deployment&gt;</code> 時發生以下錯誤:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment create --filename&#x3D;mystack.json --name&#x3D;myStack</span><br><span class="line">2015-02-24 03:11:33.579 23212 ERROR rally.api [-] Deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783: Schema validation error.</span><br><span class="line">Config schema validation error: &#123;&#39;admin&#39;: &#123;&#39;username&#39;: &#39;admin&#39;, &#39;password&#39;: &#39;myStackAdmin&#39;, &#39;tenant&#39;: &#39;benchmark&#39;&#125;, &#39;auth_url&#39;: &#39;http:&#x2F;&#x2F;myopenstack:5000&#x2F;v2.0&#x2F;&#39;, &#39;type&#39;: &#39;ExistingCloud&#39;&#125; is not valid under any of the given schemas</span><br><span class="line"></span><br><span class="line">Failed validating &#39;anyOf&#39; in schema:</span><br><span class="line">    &#123;&#39;anyOf&#39;: [&#123;&#39;properties&#39;: &#123;&#39;admin&#39;: &#123;&#39;$ref&#39;: &#39;#&#x2F;definitions&#x2F;user&#39;&#125;&#125;,</span><br><span class="line">                &#39;required&#39;: [&#39;type&#39;, &#39;auth_url&#39;, &#39;admin&#39;]&#125;,</span><br><span class="line">               &#123;&#39;required&#39;: [&#39;type&#39;, &#39;auth_url&#39;, &#39;users&#39;],</span><br><span class="line">                &#39;users&#39;: &#123;&#39;items&#39;: &#123;&#39;$ref&#39;: &#39;#&#x2F;definitions&#x2F;user&#39;&#125;,</span><br><span class="line">                          &#39;type&#39;: &#39;array&#39;&#125;&#125;],</span><br><span class="line">     &#39;definitions&#39;: &#123;&#39;user&#39;: &#123;&#39;oneOf&#39;: [&#123;&#39;properties&#39;: &#123;&#39;tenant_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,</span><br><span class="line">                                         &#39;required&#39;: [&#39;username&#39;,</span><br><span class="line">                                                      &#39;password&#39;,</span><br><span class="line">                                                      &#39;tenant_name&#39;]&#125;,</span><br><span class="line">                                        &#123;&#39;properties&#39;: &#123;&#39;project_domain_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,</span><br><span class="line">                                                        &#39;project_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,</span><br><span class="line">                                                        &#39;user_domain_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,</span><br><span class="line">                                         &#39;required&#39;: [&#39;username&#39;,</span><br><span class="line">                                                      &#39;password&#39;,</span><br><span class="line">                                                      &#39;project_name&#39;]&#125;],</span><br><span class="line">                              &#39;properties&#39;: &#123;&#39;password&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,</span><br><span class="line">                                             &#39;username&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,</span><br><span class="line">                              &#39;type&#39;: &#39;object&#39;&#125;&#125;,</span><br><span class="line">     &#39;properties&#39;: &#123;&#39;auth_url&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,</span><br><span class="line">                    &#39;endpoint_type&#39;: &#123;&#39;enum&#39;: [&#39;admin&#39;,</span><br><span class="line">                                               &#39;internal&#39;,</span><br><span class="line">                                               &#39;public&#39;],</span><br><span class="line">                                      &#39;type&#39;: &#39;string&#39;&#125;,</span><br><span class="line">                    &#39;region_name&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;,</span><br><span class="line">                    &#39;type&#39;: &#123;&#39;type&#39;: &#39;string&#39;&#125;&#125;,</span><br><span class="line">     &#39;type&#39;: &#39;object&#39;&#125;</span><br><span class="line"></span><br><span class="line">On instance:</span><br><span class="line">    &#123;&#39;admin&#39;: &#123;&#39;password&#39;: &#39;myStackAdmin&#39;,</span><br><span class="line">               &#39;tenant&#39;: &#39;benchmark&#39;,</span><br><span class="line">               &#39;username&#39;: &#39;admin&#39;&#125;,</span><br><span class="line">     &#39;auth_url&#39;: &#39;http:&#x2F;&#x2F;myopenstack:5000&#x2F;v2.0&#x2F;&#39;,</span><br><span class="line">     &#39;type&#39;: &#39;ExistingCloud&#39;&#125;.</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<p>這時候執行 <code>rally deployment list</code> 可以看到 deployment 的狀態是 failed</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment list</span><br><span class="line">+--------------------------------------+----------------------------+---------+----------------+--------+</span><br><span class="line">| uuid                                 | created_at                 | name    | status         | active |</span><br><span class="line">+--------------------------------------+----------------------------+---------+----------------+--------+</span><br><span class="line">| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-&gt;failed |        |</span><br><span class="line">+--------------------------------------+----------------------------+---------+----------------+--------+</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<p>雖然這時候，執行 <code>rally deployment recreate --deployment &lt;uuid of deployment&gt;</code> 就會<strong>看似</strong>恢復正常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment recreate --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783</span><br><span class="line">root@rally:~# rally deployment list</span><br><span class="line">+--------------------------------------+----------------------------+---------+------------------+--------+</span><br><span class="line">| uuid                                 | created_at                 | name    | status           | active |</span><br><span class="line">+--------------------------------------+----------------------------+---------+------------------+--------+</span><br><span class="line">| 59dc5f2c-a83a-42d8-bf49-777ff5e32783 | 2015-02-24 03:11:33.195680 | myStack | deploy-&gt;finished |        |</span><br><span class="line">+--------------------------------------+----------------------------+---------+------------------+--------+</span><br><span class="line">root@rally:~# rally use deployment --deployment 59dc5f2c-a83a-42d8-bf49-777ff5e32783</span><br><span class="line">Using deployment: 59dc5f2c-a83a-42d8-bf49-777ff5e32783</span><br><span class="line">~&#x2F;.rally&#x2F;openrc was updated</span><br><span class="line"></span><br><span class="line">HINTS:</span><br><span class="line">* To get your cloud resources, run:</span><br><span class="line">	rally show [flavors|images|keypairs|networks|secgroups]</span><br><span class="line"></span><br><span class="line">* To use standard OpenStack clients, set up your env by running:</span><br><span class="line">	source ~&#x2F;.rally&#x2F;openrc</span><br><span class="line">  OpenStack clients are now configured, e.g run:</span><br><span class="line">	glance image-list</span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<p>但是要做其他動作就會發生錯誤，例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment check</span><br><span class="line">Authentication Issues: user rally doesn&#39;t have &#39;admin&#39; role.</span><br></pre></td></tr></table></figure>

<p><strong>這是因為<a href="https://wiki.openstack.org/wiki/Rally/HowTo#Step_1._Deployment_initialization_.28use_existing_cloud.29" target="_blank" rel="noopener">OpenStack Wiki 教學文</a>裡，deployment.json 少了一些參數。如果是直接從 source code 裡面的 sample 中複製並修改，就不會發生這個問題。</strong></p>
<hr>
<h2 id="ConnectionRefused-Unable-to-establish-connection-OpenStack-API-endpoint"><a href="#ConnectionRefused-Unable-to-establish-connection-OpenStack-API-endpoint" class="headerlink" title="ConnectionRefused: Unable to establish connection OpenStack API endpoint"></a>ConnectionRefused: Unable to establish connection OpenStack API endpoint</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">root@rally:~# rally deployment check</span><br><span class="line">keystone endpoints are valid and following services are available:</span><br><span class="line">Command failed, please check log for more info</span><br><span class="line">2015-02-24 03:48:00.930 24945 CRITICAL rally [-] ConnectionRefused: Unable to establish connection to http:&#x2F;&#x2F;quanta-42.sslab.cs.nthu.edu.tw:35357&#x2F;v2.0&#x2F;OS-KSADM&#x2F;services</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally Traceback (most recent call last):</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;rally&quot;, line 10, in &lt;module&gt;</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     sys.exit(main())</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;main.py&quot;, line 42, in main</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     return cliutils.run(sys.argv, categories)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;cliutils.py&quot;, line 318, in run</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     ret &#x3D; fn(*fn_args, **fn_kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&lt;string&gt;&quot;, line 2, in check</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;envutils.py&quot;, line 66, in default_from_global</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     return f(*args, **kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;rally&#x2F;cmd&#x2F;commands&#x2F;deployment.py&quot;, line 248, in check</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     for service in client.services.list():</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;v2_0&#x2F;services.py&quot;, line 32, in list</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     return self._list(&quot;&#x2F;OS-KSADM&#x2F;services&quot;, &quot;OS-KSADM:services&quot;)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;base.py&quot;, line 113, in _list</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     resp, body &#x3D; self.client.get(url, **kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;adapter.py&quot;, line 164, in get</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     return self.request(url, &#39;GET&#39;, **kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;adapter.py&quot;, line 200, in request</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     resp &#x3D; super(LegacyJsonAdapter, self).request(*args, **kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;adapter.py&quot;, line 89, in request</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     return self.session.request(url, method, **kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;utils.py&quot;, line 318, in inner</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     return func(*args, **kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;session.py&quot;, line 369, in request</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     resp &#x3D; send(**kwargs)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally   File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;dist-packages&#x2F;keystoneclient&#x2F;session.py&quot;, line 412, in _send_request</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally     raise exceptions.ConnectionRefused(msg)</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally ConnectionRefused: Unable to establish connection to http:&#x2F;&#x2F;quanta-42:35357&#x2F;v2.0&#x2F;OS-KSADM&#x2F;services</span><br><span class="line">2015-02-24 03:48:00.930 24945 TRACE rally </span><br><span class="line">root@rally:~#</span><br></pre></td></tr></table></figure>

<p>我會發生這個問題是因為，我將 Rally 安裝在 OpenStack 之外，而 <code>rally deployment check</code> 會 call internal url (或是 admin url 我不是很確定)而非 public url。不過解決方法很簡單，<strong>只要將 IP 與 hostname 對應設定到 /etc/hosts 上即可。</strong></p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/OpenStack/" rel="tag">OpenStack</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2015/03/05/Compile-OpenWRT-with-Open-vSwitch/"
                    data-tooltip="Compile OpenWRT with Open vSwitch"
                    aria-label="PREVIOUS: Compile OpenWRT with Open vSwitch"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2015/02/11/Ceph-pgs-stuck-in-incomplete-state-and-ops-blocked/"
                    data-tooltip="Ceph pgs stuck in &#39;incomplete&#39; state ,ops blocked"
                    aria-label="NEXT: Ceph pgs stuck in &#39;incomplete&#39; state ,ops blocked"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                    title="Share on Weibo"
                    aria-label="Share on Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://maple52046.github.io/2015/02/24/Rally-Installation/&amp;title=Install Rally 筆記 (OpenStack benchmark)"
                    title="Share on QQ"
                    aria-label="Share on QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 古振浩 Chen-Hao Ku. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2015/03/05/Compile-OpenWRT-with-Open-vSwitch/"
                    data-tooltip="Compile OpenWRT with Open vSwitch"
                    aria-label="PREVIOUS: Compile OpenWRT with Open vSwitch"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2015/02/11/Ceph-pgs-stuck-in-incomplete-state-and-ops-blocked/"
                    data-tooltip="Ceph pgs stuck in &#39;incomplete&#39; state ,ops blocked"
                    aria-label="NEXT: Ceph pgs stuck in &#39;incomplete&#39; state ,ops blocked"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                    title="Share on Weibo"
                    aria-label="Share on Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://maple52046.github.io/2015/02/24/Rally-Installation/&amp;title=Install Rally 筆記 (OpenStack benchmark)"
                    title="Share on QQ"
                    aria-label="Share on QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://maple52046.github.io/2015/02/24/Rally-Installation/"
                        aria-label="Share on Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>Share on Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://connect.qq.com/widget/shareqq/index.html?url=https://maple52046.github.io/2015/02/24/Rally-Installation/&amp;title=Install Rally 筆記 (OpenStack benchmark)"
                        aria-label="Share on QQ"
                    >
                        <i class="fab fa-qq" aria-hidden="true"></i><span>Share on QQ</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">古振浩 Chen-Hao Ku</h4>
        
            <div id="about-card-bio"><p>Taiwanese working in ShangHai</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Backend Develop Engineer, UCloud</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                ShangHai, China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://i.imgur.com/XRcZuZk.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-yiemftmhqtwsxw4kjhvylvl77bvrkmkesswxwy8fiscgeiqtailhn40nft4k.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://maple52046.github.io/2015/02/24/Rally-Installation/';
              
            this.page.identifier = '2015/02/24/Rally-Installation/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'maple52046-githubio';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
